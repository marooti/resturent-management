<div class="w-full relative h-full" [ngClass]="{'dull-bg': loading}">
    <div class="h-full">
        <!-- Table Header -->
        <div class="header-section flex justify-content-between align-items-center p-2 border-b-2">
            <div class="header-title flex justify-content-between w-[100%]">
                <div class="flex w-[50%]">
                    <img class="w-10 h-10 p-1 rounded-full ring-2 ring-gray-300 dark:ring-gray-500"
                        style="width: 40px !important;"
                        src="https://st4.depositphotos.com/15648834/23779/v/380/depositphotos_237795814-stock-illustration-unknown-person-silhouette-glasses-profile.jpg"
                        alt="Bordered avatar">
                    <div class="pl-2 m-auto w-[100%]">
                        <span class="font-medium text-lg">{{profileData?.name}}</span>
                    </div>
                </div>
                <div class="w-[50%] justify-end flex">
                    <div class=" justify-end flex">
                        <button type="button" (click)="visible = true"
                            class="focus:outline-none text-white bg-[#1c4c74] hover:bg-green-800 focus:ring-4 focus:ring-green-300 rounded-lg text-sm px-3 me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 h-[35px]">
                            Request
                        </button>
                        <button type="button" *ngIf="!checkingstatus" (click)="checkin()"
                            class="focus:outline-none text-white bg-[#1c4c74] hover:bg-green-800 focus:ring-4 focus:ring-green-300 rounded-lg text-sm px-3 me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 h-[35px]">Check
                            In
                        </button>
                        <button type="button" *ngIf="checkingstatus" (click)="checkout()"
                            class="focus:outline-none text-white bg-[#1c4c74] hover:bg-green-800 focus:ring-4 focus:ring-green-300 rounded-lg text-sm px-3 me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 h-[35px]">Check
                            Out
                        </button>

                        <!-- <button type="button"
                            class="text-gray-400 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100  rounded-lg text-sm px-3 me-2 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700 h-[35px]">
                            <svg class="w-11 h-5 text-gray-400 dark:text-white" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 18">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M8 1v11m0 0 4-4m-4 4L4 8m11 4v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3" />
                            </svg>
                        </button> -->

                    </div>
                    <!-- <p-dropdown [options]="employeeDropdown" optionLabel="name"
                        placeholder="Select a Employee"></p-dropdown> -->
                </div>
            </div>
        </div>
        <div id="map"></div>
        <!-- Table Header -->
        <div class="header-section flex justify-content-between align-items-center p-2">
            <div class="header-title flex justify-content-between w-[100%]">
                <div class="flex w-[100%] justify-end">
                    <div class="border-[0.5px] rounded-md">
                        <p-calendar [(ngModel)]="rangeDates" selectionMode="range" [readonlyInput]="true"
                            [showIcon]="true" inputId="range">
                        </p-calendar>
                    </div>
                    <div class="pl-3">
                        <button type="button"
                            class="focus:outline-none text-white bg-[#1c4c74] hover:bg-green-800 focus:ring-4 focus:ring-green-300 rounded-lg text-sm px-3 me-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 h-[35px]">
                            Search
                        </button>
                    </div>
                </div>

            </div>

        </div>

        <!-- Weekly Data Table -->
        <div class="data-table h-full mt-3">
            <p-table scrollHeight="flex" [value]="[days]" class="p-datatable-gridlines p-datatable-striped">
                <ng-template pTemplate="header">
                    <tr class="p-2 bg-[#349ce4]">
                        <th class="bg-[#1c4c74] p-3 text-white w-[300px]" style="min-width: 300px !important;">
                            <span class="font-normal text-md">Name</span>
                        </th>
                        <th class="bg-[#1c4c74] p-3 text-white w-[300px]" style="min-width: 200px !important;">
                            <span class="font-normal text-md">Date</span>

                        </th>
                        <th class="bg-[#1c4c74] p-3 text-white w-[300px]" style="min-width: 150px !important;">
                            <span class="font-normal text-md">Check-In</span>

                        </th>
                        <th class="bg-[#1c4c74] p-3 text-white w-[300px]" style="min-width: 150px !important;">
                            <span class="font-normal text-md">Check-Out</span>

                        </th>
                        <th class="bg-[#1c4c74] p-3 text-white w-[300px]" style="min-width: 500px !important;">
                            <span class="font-normal text-md">Location</span>

                        </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body">
                    <tr *ngFor="let day of days" class="border-b-2">
                        <td class="w-[300px !important] p-3">
                            {{day.name}}
                        </td>
                        <td class="w-[300px !important] p-3">
                            {{day.date}}
                        </td>
                        <td class="w-[300px !important] p-3">
                            {{day.checkInTime }}
                        </td>
                        <td class="w-[300px !important] p-3">
                            {{day.checkOutTime ? day.checkOutTime : '❌'}}
                        </td>
                        <td class="w-[300px !important] p-3">
                            {{day.location ? day.location : '❌'}}
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>




<p-dialog [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }" class="p-3">
    <form [formGroup]="profileForm">
        <div class="p-3">
            <span class="text-xl font-semibold block pb-3 border-b-2">Attendance Request</span>
            <div class="mt-2">
                <label class="text-sm ">Required fields are marked with an asterisk <span
                        class="text-red-500">*</span></label>
            </div>
            <div class="align-items-center mt-3">
                <label class="text-sm ">Request Type <span class="text-red-500">*</span></label>
                <div class="mt-1 mb-1">
                    <p-dropdown [options]="issueName" optionValue="name" formControlName="name" optionLabel="name"
                        placeholder="Select a Type" (onChange)="onchange(profileForm.value.name)"/>

                </div>
                <div *ngIf="submitted && f['name'].errors" class="invalid-feedback">
                    <div *ngIf="!f['name'].value" class="error text-sm text-red-500">
                        Field is required
                    </div>
                </div>

            </div>
            <div class="align-items-center mt-3">
                <label class="text-sm ">Date <span class="text-red-500">*</span></label>
                <div class="mt-1 border-[0.5px] rounded-md mb-1">
                    <p-calendar [maxDate]="dateTime" formControlName="date" [readonlyInput]="true" inputId="range">
                    </p-calendar>
                </div>
                <div *ngIf="submitted && f['date'].errors" class="invalid-feedback">
                    <div *ngIf="!f['date'].value" class="error text-sm text-red-500">
                        Field is required
                    </div>
                </div>
            </div>
            <div class="align-items-center mt-3" *ngIf="requestselected === 'Check In' || requestselected === 'Both'">
                <label class="text-sm ">Check In <span class="text-red-500">*</span></label>
                <div class="mt-1 border-[0.5px] rounded-md">
                    <p-calendar inputId="calendar-timeonly" formControlName="check_in" hourFormat="12" class="w-[100%]"
                        placeholder="Enter Check In Time" [timeOnly]="true"></p-calendar>
                </div>
            </div>

            <div class="align-items-center mt-3" *ngIf="requestselected === 'Check Out' || requestselected === 'Both'">
                <label class="text-sm ">Check Out <span class="text-red-500">*</span></label>
                <div class="mt-1 border-[0.5px] rounded-md">
                    <p-calendar inputId="calendar-timeonly" formControlName="check_out" hourFormat="12" class="w-[100%]"
                        placeholder="Enter Check Out Time" [timeOnly]="true"></p-calendar>
                </div>
            </div>

            <div class="align-items-center mt-3">
                <label class="text-sm ">Description </label>
                <div class="mt-1">
                    <textarea id="message" rows="4"
                        class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                        placeholder="Write your thoughts here..." formControlName="description"></textarea>
                </div>
            </div>

            <div class="mt-3 justify-end flex">
                <button type="button" (click)="cancelFrom()"
                    class="focus:outline-none border-1 bg-white rounded-lg text-sm px-3 me-2  h-[35px]">
                    Cancel </button>
                <button type="button" (click)="onsubmit()"
                    class="focus:outline-none text-white bg-[#1c4c74] rounded-lg text-sm px-3 me-2 dark:bg-green-600 h-[35px]">
                    Create
                </button>

            </div>
        </div>
    </form>

</p-dialog>